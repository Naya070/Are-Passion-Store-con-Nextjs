{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _this = this,\n  _jsxFileName = \"/home/naya/Cursos/Platzi/Are-Passion-Store-con-Nextjs/store/Cart.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nvar __jsx = React.createElement;\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useContext, useReducer } from 'react';\nvar defaultState = {};\nvar CartItemsContext = /*#__PURE__*/React.createContext(defaultState);\nvar CartDispatchContext = /*#__PURE__*/React.createContext(function () {});\nvar CartProvider = function CartProvider(_ref) {\n  _s();\n  var children = _ref.children;\n  var _useReducer = useReducer(cartReducers, defaultState),\n    state = _useReducer[0],\n    dispatch = _useReducer[1];\n  return __jsx(CartItemsContext.Provider, {\n    value: state,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }, __jsx(CartDispatchContext.Provider, {\n    value: dispatch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, children));\n};\n_s(CartProvider, \"zEDbosDjpARfUl0vNel/+uYp9FA=\");\n_c = CartProvider;\nfunction cartReducers(state, _ref2) {\n  var item = _ref2.item,\n    type = _ref2.type,\n    _ref2$quantity = _ref2.quantity,\n    qtyToAdd = _ref2$quantity === void 0 ? 1 : _ref2$quantity;\n  var existingCartItem = state[item.id];\n  switch (type) {\n    case 'add':\n      {\n        if (existingCartItem != undefined) {\n          var quantity = existingCartItem.quantity + qtyToAdd;\n          return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, item.id, _objectSpread(_objectSpread({}, existingCartItem), {}, {\n            quantity: quantity\n          })));\n        }\n        return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, item.id, _objectSpread(_objectSpread({}, item), {}, {\n          quantity: qtyToAdd\n        })));\n      }\n    case 'remove':\n      {\n        if (existingCartItem == undefined) {\n          return state;\n        }\n        var _quantity = existingCartItem.quantity - 1;\n        if (_quantity > 0) {\n          return _objectSpread(_objectSpread({}, state), {}, _defineProperty({}, item.id, _objectSpread(_objectSpread({}, existingCartItem), {}, {\n            quantity: _quantity\n          })));\n        }\n        var newCartItems = _objectSpread({}, state);\n        delete newCartItems[item.id];\n        return newCartItems;\n      }\n    default:\n      {\n        throw new Error(\"Unhandled action type: \".concat(type));\n      }\n  }\n}\nvar getCartSubTotal = function getCartSubTotal(sum, item) {\n  sum += item.price * item.quantity;\n  return sum;\n};\nvar getCartCount = function getCartCount(sum, item) {\n  return sum + item.quantity;\n};\n/**\n * Hey there insatiably brain,\n * Are you interested in this pattern where the Context values are\n * exposed without actually provinding access to the Context itself :)\n * https://kentcdodds.com/blog/how-to-use-react-context-effectively\n */\nexport var useCart = function useCart() {\n  _s2();\n  var itemsById = useContext(CartItemsContext);\n  var items = Object.values(itemsById);\n  // Not familiar with Array.reduce? :)\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\n  var count = items.reduce(getCartCount, 0);\n  var subTotal = items.reduce(getCartSubTotal, 0);\n  return {\n    items: items,\n    itemsById: itemsById,\n    count: count,\n    subTotal: subTotal\n  };\n};\n_s2(useCart, \"iAmorUPFRY64w7Jvzz+kkbzLn1E=\");\nexport var useCartMutations = function useCartMutations() {\n  _s3();\n  var dispatch = useContext(CartDispatchContext);\n  var addToCart = function addToCart(product, quantity) {\n    return dispatch({\n      type: 'add',\n      item: product,\n      quantity: quantity\n    });\n  };\n  var removeFromCart = function removeFromCart(product) {\n    return dispatch({\n      type: 'remove',\n      item: product\n    });\n  };\n  return {\n    addToCart: addToCart,\n    removeFromCart: removeFromCart\n  };\n};\n_s3(useCartMutations, \"kCU+r/6VuXUfg74P0SIOBSNFld8=\");\nexport default CartProvider;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","useContext","useReducer","defaultState","CartItemsContext","createContext","CartDispatchContext","CartProvider","children","cartReducers","state","dispatch","item","type","quantity","qtyToAdd","existingCartItem","id","undefined","newCartItems","Error","getCartSubTotal","sum","price","getCartCount","useCart","itemsById","items","Object","values","count","reduce","subTotal","useCartMutations","addToCart","product","removeFromCart"],"sources":["/home/naya/Cursos/Platzi/Are-Passion-Store-con-Nextjs/store/Cart.tsx"],"sourcesContent":["import React, { Dispatch, useContext, useReducer } from 'react'\n\nexport type CartItemType = TProduct & { quantity: number }\n\nexport type CartState = {\n  [key: string]: CartItemType\n}\n\nexport type CartAction = {\n  type: 'add' | 'remove'\n  item: TProduct\n  quantity?: number\n}\n\nconst defaultState = {} as CartState\n\nconst CartItemsContext = React.createContext(defaultState)\nconst CartDispatchContext = React.createContext((() => {}) as Dispatch<\n  CartAction\n>)\n\nconst CartProvider = ({ children }: { children: React.ReactNode }) => {\n  const [state, dispatch] = useReducer(cartReducers, defaultState)\n\n  return (\n    <CartItemsContext.Provider value={state}>\n      <CartDispatchContext.Provider value={dispatch}>\n        {children}\n      </CartDispatchContext.Provider>\n    </CartItemsContext.Provider>\n  )\n}\n\nfunction cartReducers(\n  state: CartState,\n  { item, type, quantity: qtyToAdd = 1 }: CartAction\n) {\n  const existingCartItem = state[item.id]\n\n  switch (type) {\n    case 'add': {\n      if (existingCartItem != undefined) {\n        const quantity = existingCartItem.quantity + qtyToAdd\n        return {\n          ...state,\n          [item.id]: {\n            ...existingCartItem,\n            quantity,\n          },\n        }\n      }\n\n      return {\n        ...state,\n        [item.id]: {\n          ...item,\n          quantity: qtyToAdd,\n        },\n      }\n    }\n\n    case 'remove': {\n      if (existingCartItem == undefined) {\n        return state\n      }\n\n      const quantity = existingCartItem.quantity - 1\n      if (quantity > 0) {\n        return {\n          ...state,\n          [item.id]: {\n            ...existingCartItem,\n            quantity,\n          },\n        }\n      }\n\n      const newCartItems = { ...state }\n      delete newCartItems[item.id]\n      return newCartItems\n    }\n\n    default: {\n      throw new Error(`Unhandled action type: ${type}`)\n    }\n  }\n}\n\nconst getCartSubTotal = (sum: number, item: CartItemType) => {\n  sum += item.price * item.quantity\n  return sum\n}\nconst getCartCount = (sum: number, item: CartItemType) => sum + item.quantity\n/**\n * Hey there insatiably brain,\n * Are you interested in this pattern where the Context values are\n * exposed without actually provinding access to the Context itself :)\n * https://kentcdodds.com/blog/how-to-use-react-context-effectively\n */\nexport const useCart = () => {\n  const itemsById = useContext(CartItemsContext)\n  const items = Object.values(itemsById)\n  // Not familiar with Array.reduce? :)\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\n  const count = items.reduce(getCartCount, 0)\n  const subTotal = items.reduce(getCartSubTotal, 0)\n\n  return {\n    items,\n    itemsById,\n    count,\n    subTotal,\n  }\n}\nexport const useCartMutations = () => {\n  const dispatch = useContext(CartDispatchContext)\n\n  const addToCart = (product: TProduct, quantity?: number) =>\n    dispatch({\n      type: 'add',\n      item: product,\n      quantity,\n    })\n\n  const removeFromCart = (product: TProduct) =>\n    dispatch({\n      type: 'remove',\n      item: product,\n    })\n\n  return {\n    addToCart,\n    removeFromCart,\n  }\n}\n\nexport default CartProvider\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}